{"version":3,"sources":["core/util.js","components/Ship.js","components/ShipSelector.js","core/GameSettings.js","components/Board.js","components/SetupBoard.js","core/Button.js","components/EnemyBoard.js","components/PlayerBoard.js","core/ButtonGroup.js","components/Header.js","components/GameFinished.js","core/useDidUpdateEffect.js","App.js","serviceWorker.js","index.js"],"names":["uuidv4","replace","c","crypto","getRandomValues","Uint8Array","toString","getDimensions","template","rows","length","cols","getRandomInt","min","max","Math","ceil","floor","random","hullSize","flat","reduce","previous","current","ShipContent","React","memo","ship","setDraggedShip","cellSize","gap","isSunken","isSmall","containerWidth","containerHeight","handleGrabbingShip","useCallback","x","y","cn","classNames","className","onMouseDown","e","viewBox","xmlns","map","row","cell","key","fill","stroke","width","height","stopPropagation","Ship","props","rotateTemplate90deg","rotatedTemplate","Array","ShipWithTooltip","templates","draggedShip","w","useState","show","setShow","onSetDraggedShip","onMouseLeave","onMouseEnter","style","shipTemplate","i","ShipGroup","allowed","children","sCN","ShipSelector","allowedCounts","useContext","GameSettingsContext","settings","shipConfig","group","allwdIdx","index","templateName","t","getAllRotations","mutations","rotations","push","ship1Rotated","ship2Rotated","ship3StraightRotated","ship3LRotated","ship4BlockRotated","ship4StraightRotated","GAME_MODES","simple","name","advanced","concat","createContext","rowNames","BoardShip","handleMouseDown","uuid","ys","xs","strokeWidth","getStrokeColor","inBounds","isOverlapping","getTransform","colStep","rowStep","LetterRow","letters","handleMouseEnter","letter","transform","textLength","fontSize","NumberRow","numbers","num","BlankPlaceholders","handleClick","onClick","Board","placedShips","draggingPosition","handleCellMouseEnter","handlePlacedShipDragging","gameSettings","colNames","isDragging","position","zIndex","left","top","pointerEvents","offset","cursor","isSnapping","BlankBoard","onCellClick","placeShipOnBoard","board","j","placedShipsToBoard","neighborDiff","xd","yd","ny","nx","calculateOffset","centerOffset","getAllValidPositions","positions","getRandomShipPlacement","allTemplates","arr","f","chosenTemplates","r","validPositions","cx","cy","shipCountsOnBoard","validShipCount","placedShip","SetupBoard","usePlacedShips","title","setPlacedShips","setDraggingPosition","hoveredCell","setHoveredCell","handleDraggedShip","shipUUID","handleDraggedShipSnapping","newDragged","handleOnMouseUp","newPlaced","lastValidPosition","handleDraggingOnPlacedShip","filter","sh","fillBoardWithRandom","handleOnMouseMove","buttons","clientX","clientY","useEffect","document","addEventListener","removeEventListener","handleOnMouseDown","Button","isDisabled","outlined","isActive","cns","svgCoord","ct","PlacedShots","placedShots","shotSource","addHit","target","hits","filteredHits","hx","hy","ShipHits","sx","sy","d","HullToD","hull","ShipHull","shipHull","yt","xt","x0","y0","x1","y1","BombedShips","ships","alreadyPlaced","shots","s","getComputerShots","placedAutoShots","templatePoints","shipTemplatePoints","autoShots","TargetsRow","size","sort","reverse","Targets","gameState","objectArray","property","TargetShips","acc","obj","Object","entries","EnemyBoard","usePlacedShots","useEnemyShips","gameCanStart","onStartClick","useAutoShots","onMissedShot","showShips","setPlacedShots","placedComputerShots","setPlacedComputerShots","enemyShips","setEnemyShips","targetShip","PlayerBoard","useTakenShots","useTakenAutoShots","takenShots","takenAutoShots","ButtonGroup","Header","setGameSettings","role","aria-label","GameFinished","computerShips","isPlayerTurn","restartGame","every","useDidUpdateEffect","func","deps","didMount","useRef","placeShot","App","setGameState","setIsPlayerTurn","playerPlacedShips","setPlayerPlacedShips","playerPlacedShots","setPlayerPlacedShots","playerPlacedAutoShots","setPlayerPlacedAutoShots","computerPlacedShips","setComputerPlacedShips","computerPlacedShots","setComputerPlacedShots","computerPlacedAutoShots","setComputerPlacedAutoShots","resetGame","timer","setTimeout","woundedShip","modeName","shotsCombined","pHits","diffs","mode","getDiffArray","chooseTarget","shipShots","hit","undefined","allPositions","filteredPos","getRandomValidTarget","clearTimeout","Provider","value","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.d53efb6e.chunk.js","sourcesContent":["export function uuidv4() {\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        // eslint-disable-next-line no-mixed-operators\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function getRandomColor() {\n    const letters = '0123456789ABCDEF';\n    let color = '#';\n    for (let i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n}\n\n\nexport function getDimensions(template) {\n    return {\n        rows: template.length,\n        cols: template[0].length\n    };\n}\n\nexport function getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport const hullSize = (template) => {\n    return template.flat(2).reduce((previous, current) => current += previous);\n}\n\nexport function groupBy(objectArray, property) {\n    return objectArray.reduce(function (acc, obj) {\n        let key = obj[property];\n        if (!acc[key]) {\n            acc[key] = [];\n        }\n        acc[key].push(obj);\n        return acc;\n    }, {});\n}\n","import React, {useCallback} from \"react\";\nimport {getDimensions} from \"../core/util\";\nimport classNames from \"classnames\"\n\nconst ShipContent = React.memo(({ship, setDraggedShip, cellSize = 10, gap = 1, isSunken, isSmall}) => {\n    const {rows, cols} = getDimensions(ship);\n\n    const containerWidth = cellSize * cols + cols - 1;\n    const containerHeight = cellSize * rows + rows - 1;\n\n    const handleGrabbingShip = useCallback((x, y) => {\n        setDraggedShip(ship, x, y)\n    }, [setDraggedShip, ship]);\n\n    const cn = classNames(`ship ship--${cols}`, {\"ship--small\": isSmall}, {\"ship--sunken\": isSunken})\n\n    return (\n        <div className={cn}\n             onMouseDown={e => {\n                 handleGrabbingShip(-1, -1)\n             }}>\n            <svg viewBox={`0 0 ${containerWidth} ${containerHeight}`} xmlns=\"http://www.w3.org/2000/svg\">\n                {ship.map((row, y) => row.map((cell, x) => {\n                    if (cell) {\n                        return (\n                            <rect\n                                key={`${x}:${y}`}\n                                fill=\"white\"\n                                stroke=\"transparent\"\n                                x={(x) * cellSize + ((x) * gap)}\n                                y={(y) * cellSize + ((y) * gap)}\n                                width={cellSize}\n                                height={cellSize}\n                                onMouseDown={(e) => {\n                                    handleGrabbingShip(x, y);\n                                    e.stopPropagation();\n                                }}\n                            />\n                        )\n                    } else {\n                        return null;\n                    }\n                }))}\n            </svg>\n        </div>\n    )\n});\n\nexport const Ship = React.memo((props) => {\n    if (props.ship === null) {\n        return null;\n    } else {\n        return <ShipContent {...props}/>\n    }\n\n})\n","import React, {useCallback, useContext, useState} from \"react\";\nimport {Ship} from \"./Ship\";\nimport {getDimensions} from \"../core/util\";\nimport classNames from \"classnames\"\nimport {GameSettingsContext} from \"../core/GameSettings\";\n\nexport const rotateTemplate90deg = (template) => {\n    const {rows, cols} = getDimensions(template);\n\n    let rotatedTemplate = new Array(cols).fill().map(() => new Array(rows).fill(0));\n\n    for (let y = 0; y < rows; y++) {\n        for (let x = 0; x < cols; x++) {\n            rotatedTemplate[(cols - x - 1)][y] = template[y][x];\n        }\n    }\n\n    return rotatedTemplate;\n};\n\nconst ShipWithTooltip = React.memo(({templates, setDraggedShip, draggedShip, w}) => {\n    const [show, setShow] = useState(false)\n\n    const onSetDraggedShip = useCallback((ship, x, y) => {\n        setDraggedShip(ship, x, y);\n        setShow(false);\n    }, [setShow, setDraggedShip])\n\n    return (\n        <div className=\"ship-with-tooltip\"\n             onMouseLeave={() => setShow(false)}>\n            <div onMouseEnter={() => setShow(true)}>\n                <Ship ship={templates[0]}\n                      setDraggedShip={onSetDraggedShip}/>\n            </div>\n            {\n                templates.length > 1 &&\n                draggedShip === null &&\n                show &&\n                <div className=\"ship-with-tooltip__box\"\n                     style={{width: w}}>\n                    {templates.map((shipTemplate, i) => <Ship ship={shipTemplate}\n                                                              key={`key-${i}`}\n                                                              setDraggedShip={onSetDraggedShip}/>)}\n                </div>\n            }\n        </div>\n    )\n})\n\nconst ShipGroup = React.memo(({allowed, children}) => {\n    const sCN = classNames(\"ship-group\", {\"ship-group--disabled\": allowed <= 0})\n\n    return (\n        <div className={sCN}>\n            <div className=\"ship-group__label\">\n                {allowed}×\n            </div>\n            {children}\n        </div>\n    )\n})\n\nexport const ShipSelector = React.memo(({draggedShip, setDraggedShip, allowedCounts}) => {\n\n        const [settings] = useContext(GameSettingsContext)\n\n        return (\n            <div className=\"ship-selector\">\n                {settings.shipConfig.map((group, allwdIdx) => {\n                    return (\n                        <ShipGroup\n                            key={`group-${allwdIdx}`}\n                            allowed={allowedCounts[allwdIdx]}>\n                            {group.map((template, index) => {\n                                return (\n                                    <ShipWithTooltip key={`ship-${allwdIdx}-${index}`}\n                                                     draggedShip={draggedShip}\n                                                     setDraggedShip={setDraggedShip}\n                                                     w={template.w}\n                                                     templateName={`ship-${allwdIdx}-${index}`}\n                                                     templates={template.t}/>\n                                )\n                            })}\n                        </ShipGroup>\n                    )\n                })}\n            </div>\n        )\n\n    }\n)\n","import React from \"react\";\nimport {rotateTemplate90deg} from \"../components/ShipSelector\";\n\nexport const getAllRotations = ({template, mutations}) => {\n    let rotations = [template]\n    for (let i = 0; i < mutations; i++) {\n        rotations.push(rotateTemplate90deg(rotations[i]))\n    }\n    return rotations\n}\n\nconst ship1 = {\n    mutations: 0,\n    template: [[1]]\n}\n\nconst ship2 = {\n    mutations: 1,\n    template: [[1, 1]]\n}\n\nconst ship3Straight = {\n    mutations: 1,\n    template: [\n        [1, 1, 1]\n    ]\n};\n\nconst ship3L = {\n    mutations: 3,\n    template: [\n        [1, 1],\n        [1, 0]\n    ]\n};\n\nconst ship4Block = {\n    mutations: 0,\n    template: [\n        [1, 1],\n        [1, 1],\n    ]\n};\n\nconst ship4Straight = {\n    mutations: 1,\n    template: [[1, 1, 1, 1]]\n}\n\nconst ship4L = {\n    mutations: 3,\n    template: [\n        [1, 1, 1],\n        [1, 0, 0]\n    ]\n}\n\nconst ship4LFlipped = {\n    mutations: 3,\n    template: [\n        [1, 0, 0],\n        [1, 1, 1]\n    ]\n}\n\nconst ship4T = {\n    mutations: 3,\n    template: [\n        [0, 1, 0],\n        [1, 1, 1]\n    ]\n}\n\nconst ship4Z = {\n    mutations: 1,\n    template: [\n        [1, 1, 0],\n        [0, 1, 1]\n    ]\n}\n\nconst ship4ZFlipped = {\n    mutations: 1,\n    template: [\n        [0, 1, 1],\n        [1, 1, 0]\n    ]\n}\n\nconst ship1Rotated = getAllRotations(ship1);\n\nconst ship2Rotated = getAllRotations(ship2);\n\nconst ship3StraightRotated = getAllRotations(ship3Straight);\nconst ship3LRotated = getAllRotations(ship3L);\n\nconst ship4BlockRotated = getAllRotations(ship4Block);\nconst ship4StraightRotated = getAllRotations(ship4Straight);\nconst ship4LRotated = getAllRotations(ship4L).concat(getAllRotations(ship4LFlipped));\nconst ship4TRotated = getAllRotations(ship4T);\nconst ship4ZRotated = getAllRotations(ship4Z).concat(getAllRotations(ship4ZFlipped));\n\nconst advancedShipConfig = [\n    [{\n        t: ship1Rotated,\n        w: null\n    }],\n    [{\n        t: ship2Rotated,\n        w: 170\n    }],\n\n    [{\n        t: ship3StraightRotated,\n        w: 210\n    }, {\n        t: ship3LRotated,\n        w: 385\n    }],\n    [{\n        t: ship4StraightRotated,\n        w: 245\n    }, {\n        t: ship4BlockRotated,\n        w: null\n    }, {\n        t: ship4LRotated,\n        w: 459\n    }, {\n        t: ship4TRotated,\n        w: 459\n    }, {\n        t: ship4ZRotated,\n        w: 459\n    }]\n]\n\n\nconst simpleShipConfig = [\n    [{\n        t: ship1Rotated,\n        w: null\n    }],\n    [{\n        t: ship2Rotated,\n        w: 170\n    }],\n\n    [{\n        t: ship3StraightRotated,\n        w: 210\n    }],\n    [{\n        t: ship4StraightRotated,\n        w: 245\n    }]\n]\n\nexport const GAME_MODES = {\n    simple: {\n        name: \"simple\",\n        cols: \"ABCDEFGHIJ\",\n        shipConfig: simpleShipConfig\n    },\n    advanced: {\n        name: \"advanced\",\n        cols: \"KARTUPELIS\",\n        shipConfig: advancedShipConfig\n    }\n}\nexport const GameSettingsContext = React.createContext(\n    GAME_MODES.advanced\n)\n","import React, {useContext} from \"react\";\nimport {Ship} from \"./Ship\";\nimport {GameSettingsContext} from \"../core/GameSettings\";\n\nexport const cellSize = 10;\nexport const gap = 1;\nconst boardCols = 11; // 10 cols + 1 for number\nconst boardRows = 11; // 10 rows + 1 for letter\n\nconst rowNames = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\nconst containerWidth = cellSize * boardCols + boardCols;\nconst containerHeight = cellSize * boardRows + boardRows;\n\nexport const BoardShip = React.memo(({x, y, template, cellSize = 10, gap = 1, handleMouseDown, uuid}) => {\n    return (\n        <g\n            className=\"board-ship\"\n            onMouseDown={() => handleMouseDown(-1, -1)}>\n            {template.map((row, ys) => row.map((cell, xs) => {\n                if (cell) {\n                    return (\n                        <rect\n                            key={`${uuid}-${ys}-${xs}`}\n                            onMouseDown={e => {\n                                handleMouseDown(xs, ys);\n                                e.stopPropagation()\n                            }}\n                            strokeWidth=\"2\"\n                            stroke=\"transparent\"\n                            x={(x + xs + 1) * cellSize + ((x + xs + 1) * gap)}\n                            y={(y + ys + 1) * cellSize + ((y + ys + 1) * gap)}\n                            width={cellSize}\n                            height={cellSize}\n                        />\n                    )\n                } else {\n                    return null;\n                }\n            }))}\n\n        </g>\n    )\n})\n\nconst getStrokeColor = (draggedShip) => {\n    if (!draggedShip.inBounds) {\n        return \"#ffd868\";\n    } else if (draggedShip.isOverlapping) {\n        return \"#b80d57\"\n    }\n    return \"white\";\n};\n\nconst getTransform = (template, x, y) => {\n    const rows = template.length;\n    const cols = template[0].length;\n\n    const colStep = 100 / cols;\n    const rowStep = 100 / rows;\n\n    return `translate(-${colStep / 2 + colStep * x}%, -${rowStep / 2 + rowStep * y}%)`\n};\n\nconst LetterRow = React.memo(({letters, handleMouseEnter}) => {\n    return (\n        <g className=\"letter-row\">\n            {letters.map((letter, index) => {\n                return (\n                    <g key={letter}>\n                        <rect stroke=\"var(--body-background)\"\n                              strokeWidth=\"2\"\n                              fill=\"var(--body-background)\"\n                              x={(index + 1) * cellSize + ((index + 1) * gap)}\n                              y=\"0\"\n                              width={cellSize}\n                              height={cellSize}\n                              onMouseEnter={handleMouseEnter}\n                        />\n                        <text\n                            x={(index + 1) * cellSize + (index * gap)}\n                            y={cellSize}\n                            transform=\"translate(3,-2)\"\n                            textLength={cellSize}\n                            fill=\"white\"\n                            style={{fontSize: \"9\"}}\n                        >\n                            {letter}\n                        </text>\n                    </g>\n                )\n            })}\n\n        </g>)\n});\n\nconst NumberRow = React.memo(({numbers, handleMouseEnter}) => {\n    return (\n        <g className=\"number-col\">\n            {numbers.map((num, index) => {\n                return (\n                    <g key={num}>\n                        <rect stroke=\"var(--body-background)\"\n                              strokeWidth=\"2\"\n                              fill=\"var(--body-background)\"\n                              x=\"0\"\n                              y={(index + 1) * cellSize + ((index + 1) * gap)}\n                              width={cellSize}\n                              height={cellSize}\n                              onMouseEnter={handleMouseEnter}\n                        />\n                        <text x=\"0\"\n                              y={(index + 2) * cellSize + (index * gap)}\n                              textLength={cellSize}\n                              fill=\"white\"\n                              transform=\"translate(0,-2)\"\n                              onMouseEnter={handleMouseEnter}\n                              style={{fontSize: \"9\"}}>\n                            {num}\n                        </text>\n                    </g>\n                )\n            })}\n        </g>\n    )\n});\n\nconst BlankPlaceholders = React.memo(({cols, rows, handleMouseEnter, className, handleClick = () => null}) => {\n    return (\n        <g className=\"blank-placeholders\">\n            {cols.map((letter, x) => {\n                return rows.map((num, y) => {\n                    return (<rect key={`${letter}:${num}`}\n                                  className={className}\n                                  stroke=\"transparent\"\n                                  fill=\"#109DAC\"\n                                  x={(x + 1) * cellSize + ((x + 1) * gap)}\n                                  y={(y + 1) * cellSize + ((y + 1) * gap)}\n                                  width={cellSize}\n                                  height={cellSize}\n                                  onClick={() => handleClick({x, y})}\n                                  onMouseEnter={() => handleMouseEnter({x, y})}\n                    />)\n                })\n            })}\n        </g>\n    )\n})\n\nexport function Board({placedShips, draggingPosition, handleCellMouseEnter, draggedShip, handlePlacedShipDragging}) {\n    const [gameSettings] = useContext(GameSettingsContext)\n    const colNames = [...gameSettings.cols];\n\n    return (\n        <div className=\"board\">\n            {draggedShip && draggedShip.isDragging &&\n            <div style={{\n                position: \"fixed\",\n                zIndex: \"2\",\n                left: draggingPosition.x,\n                top: draggingPosition.y,\n                pointerEvents: \"none\",\n                transform: getTransform(draggedShip.template, draggedShip.offset.x, draggedShip.offset.y)\n            }}>\n                <Ship ship={draggedShip.template}/>\n            </div>}\n\n            <svg viewBox={`0 0 ${containerWidth} ${containerHeight}`}\n                 onMouseLeave={() => handleCellMouseEnter({x: -1, y: -1})}\n                 xmlns=\"http://www.w3.org/2000/svg\">\n\n\n                <BlankPlaceholders cols={colNames}\n                                   rows={rowNames}\n                                   handleMouseEnter={handleCellMouseEnter}/>\n\n                <g style={draggedShip ? {\n                    pointerEvents: \"none\",\n                    fill: \"white\",\n                } : {\n                    cursor: \"pointer\",\n                    fill: \"white\",\n                }}>\n                    {\n                        placedShips.map(ship => <BoardShip template={ship.template}\n                                                           uuid={ship.uuid}\n                                                           key={ship.uuid}\n                                                           handleMouseDown={(x, y) => handlePlacedShipDragging(ship, x, y)}\n                                                           x={ship.x}\n                                                           y={ship.y}/>)\n                    }\n                </g>\n\n                {draggedShip && draggedShip.isSnapping &&\n                <g style={{\n                    pointerEvents: \"none\",\n                    fill: getStrokeColor(draggedShip),\n                }}>\n                    <BoardShip template={draggedShip.template}\n                               uuid={draggedShip.uuid}\n                               x={draggedShip.x}\n                               y={draggedShip.y}/>\n                </g>}\n                <LetterRow letters={colNames}\n                           handleMouseEnter={() => handleCellMouseEnter({x: -1, y: -1})}/>\n\n                <NumberRow numbers={rowNames}\n                           handleMouseEnter={() => handleCellMouseEnter({x: -1, y: -1})}/>\n            </svg>\n        </div>\n    )\n}\n\nexport function BlankBoard({\n                               onCellClick,\n                               handleCellMouseEnter,\n                               children\n                           }) {\n    const [gameSettings] = useContext(GameSettingsContext)\n    const colNames = [...gameSettings.cols];\n\n    return (\n        <div className=\"board\">\n            <svg viewBox={`0 0 ${containerWidth} ${containerHeight}`}\n                 onMouseLeave={() => handleCellMouseEnter({x: -1, y: -1})}\n                 xmlns=\"http://www.w3.org/2000/svg\">\n\n                <BlankPlaceholders cols={colNames}\n                                   rows={rowNames}\n                                   className=\"board-hover\"\n                                   handleClick={onCellClick}\n                                   handleMouseEnter={handleCellMouseEnter}/>\n\n                <LetterRow letters={colNames}\n                           handleMouseEnter={() => handleCellMouseEnter({x: -1, y: -1})}/>\n\n                <NumberRow numbers={rowNames}\n                           handleMouseEnter={() => handleCellMouseEnter({x: -1, y: -1})}/>\n                {children}\n            </svg>\n        </div>\n    )\n}\n","import React, {Fragment, useCallback, useContext, useEffect, useState} from 'react';\nimport {Board} from \"./Board\";\nimport {ShipSelector} from \"./ShipSelector\";\nimport {getDimensions, getRandomInt, hullSize, uuidv4} from \"../core/util\";\nimport {GameSettingsContext} from \"../core/GameSettings\";\n\nconst centerOffset = (template) => {\n    const {rows, cols} = getDimensions(template);\n\n    return {\n        x: Math.floor((cols - 1) / 2),\n        y: Math.floor((rows - 1) / 2)\n    }\n};\n\nconst inBounds = (x, y, template) => {\n    const {rows, cols} = getDimensions(template);\n\n    if (x < 0 || y < 0) {\n        return false;\n    }\n\n    return rows + y < 11 && cols + x < 11;\n};\n\nconst placeShipOnBoard = (ship, board) => {\n    const {x, y, template, uuid} = ship;\n    const {rows, cols} = getDimensions(template);\n\n    for (let i = 0; i < rows; i++) {\n        for (let j = 0; j < cols; j++) {\n            board[y + i][x + j] = template[i][j] ? uuid : \"\";\n        }\n    }\n\n};\n\nexport const placedShipsToBoard = (placedShips) => {\n    let board = new Array(10).fill().map(() => new Array(10).fill(\"\"));\n\n    for (const ship of placedShips) {\n        placeShipOnBoard(ship, board);\n    }\n    return board;\n};\n\nconst neighborDiff = [[-1, -1], [-1, 0], [-1, 1], [0, 0], [0, -1], [0, 1], [1, -1], [1, 0], [1, 1]];\n\nconst isOverlapping = (x, y, template, placedShips, board = placedShipsToBoard(placedShips)) => {\n    const {rows, cols} = getDimensions(template);\n\n    for (let i = 0; i < rows; i++) {\n        for (let j = 0; j < cols; j++) {\n            if (template[i][j]) {\n                for (let [xd, yd] of neighborDiff) {\n                    const ny = i + y + yd;\n                    const nx = j + x + xd;\n                    if ((ny > -1 && ny < 10) &&\n                        (nx > -1 && nx < 10) &&\n                        board[ny][nx] !== \"\") {\n                        return true;\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n};\n\nconst calculateOffset = (shipTemplate, x, y) => {\n    if (x === -1 && y === -1) {\n        return centerOffset(shipTemplate)\n    } else {\n        return {x, y}\n    }\n};\n\nconst getAllValidPositions = (board, template) => {\n    const positions = [];\n\n    for (let y = 0; y < 10; y++) {\n        for (let x = 0; x < 10; x++) {\n            if (inBounds(x, y, template) && !isOverlapping(x, y, template, [], board)) {\n                positions.push([x, y]);\n            }\n        }\n    }\n\n    return positions;\n};\n\nexport const getRandomShipPlacement = (shipConfig) => {\n    let board = new Array(10).fill().map(() => new Array(10).fill(\"\"))\n\n    // flattens the ship config array to be consumed by the random placement algorithm\n    const allTemplates = shipConfig.map((arr) => {\n        return [arr.map(f => {\n            return f.t\n        }).flat()]\n    }).flat()\n\n    const chosenTemplates = [];\n    const placedShips = [];\n\n\n    for (let i = 0; i < 4; i++) {\n        for (let j = 0; j < 4 - i; j++) {\n            const r = getRandomInt(0, allTemplates[i].length - 1);\n            chosenTemplates.push(allTemplates[i][r])\n        }\n    }\n\n    for (let i = 9; i >= 0; i--) {\n        const validPositions = getAllValidPositions(board, chosenTemplates[i]);\n        if (validPositions.length > 0) {\n            const [cx, cy] = validPositions[getRandomInt(0, validPositions.length - 1)];\n            placedShips.push({\n                uuid: uuidv4(),\n                x: cx,\n                y: cy,\n                template: chosenTemplates[i],\n                inBounds: true,\n                isOverlapping: false,\n                isDragging: false,\n                isSnapping: true\n            });\n\n            placeShipOnBoard({\n                x: cx,\n                y: cy,\n                template: chosenTemplates[i]\n            }, board);\n        } else {\n            // in case there are no available places where to put stuff,\n            // just call the function again. I tried this fn ~50k times,\n            // and it was never called again so this is just a precaution\n            getRandomShipPlacement(shipConfig);\n        }\n\n    }\n\n    return placedShips;\n};\n\nconst shipCountsOnBoard = (placedShips) => {\n    let validShipCount = [4, 3, 2, 1];\n    for (let placedShip of placedShips) {\n        validShipCount[hullSize(placedShip.template) - 1]--;\n    }\n    return validShipCount;\n}\n\nexport const isValidShipCount = (ships) => {\n    return shipCountsOnBoard(ships).every(i => i === 0)\n}\n\nexport function SetupBoard({usePlacedShips, title}) {\n    const [placedShips, setPlacedShips] = usePlacedShips;\n    const [draggedShip, setDraggedShip] = useState(null);\n    const [draggingPosition, setDraggingPosition] = useState({x: 0, y: 0});\n    const [hoveredCell, setHoveredCell] = useState({x: -1, y: -1});\n    const [gameSettings] = useContext(GameSettingsContext)\n\n    const handleCellMouseEnter = useCallback(({x, y}) => {\n        setHoveredCell({x, y});\n    }, [setHoveredCell]);\n\n    const handleDraggedShip = useCallback((shipTemplate, x, y) => {\n        const shipUUID = uuidv4();\n\n        const offset = calculateOffset(shipTemplate, x, y);\n\n        setDraggedShip({\n            template: shipTemplate,\n            uuid: shipUUID,\n            isDragging: true,\n            isSnapping: false,\n            offset: offset,\n            x: -100000,\n            y: -100000\n        })\n    }, [setDraggedShip]);\n\n    const handleDraggedShipSnapping = useCallback(() => {\n\n        const isSnapping = hoveredCell.x > -1 && hoveredCell.y > -1;\n        const x = hoveredCell.x - draggedShip.offset.x;\n        const y = hoveredCell.y - draggedShip.offset.y;\n\n        let newDragged = {\n            ...draggedShip,\n            x: x,\n            y: y,\n            inBounds: inBounds(x, y, draggedShip.template),\n            isOverlapping: isOverlapping(x, y, draggedShip.template, placedShips),\n            isDragging: !isSnapping,\n            isSnapping: isSnapping\n        };\n\n        setDraggedShip(newDragged)\n\n    }, [draggedShip, setDraggedShip, hoveredCell, placedShips]);\n\n    const handleOnMouseUp = useCallback((e) => {\n        if (draggedShip?.isSnapping &&\n            draggedShip.inBounds &&\n            !draggedShip.isOverlapping) {\n            let newPlaced = [...placedShips];\n\n            setPlacedShips(newPlaced.concat([{...draggedShip}]));\n\n            setDraggedShip(null);\n            setDraggingPosition({x: -1000, y: -1000})\n        } else {\n            if (draggedShip?.lastValidPosition && draggedShip.inBounds) {\n                let newPlaced = [...placedShips];\n\n                setPlacedShips(newPlaced.concat([{\n                    ...draggedShip,\n                    x: draggedShip.lastValidPosition.x,\n                    y: draggedShip.lastValidPosition.y\n                }]));\n            }\n            setDraggingPosition({x: -1000, y: -1000});\n            setDraggedShip(null);\n        }\n    }, [draggedShip, placedShips, setDraggedShip, setPlacedShips, setDraggingPosition]);\n\n    const handleDraggingOnPlacedShip = useCallback((ship, x, y) => {\n        let newPlaced = placedShips.filter(sh => sh.uuid !== ship.uuid);\n\n        ship.offset = calculateOffset(ship.template, x, y);\n        ship.lastValidPosition = {x: ship.x, y: ship.y};\n\n        setDraggedShip(ship);\n        setPlacedShips(newPlaced);\n    }, [placedShips, setPlacedShips, setDraggedShip]);\n\n    const fillBoardWithRandom = () => {\n        setPlacedShips(getRandomShipPlacement(gameSettings.shipConfig));\n    };\n\n    const resetBoard = () => {\n        setPlacedShips([])\n    };\n\n    // for internal board algorithm testing\n    // eslint-disable-next-line no-unused-vars\n    const tryLots = () => {\n        let results = [];\n        for (let i = 0; i < 10000; i++) {\n            let t1 = performance.now();\n            fillBoardWithRandom()\n            let t2 = performance.now();\n            results.push(t2 - t1);\n        }\n        let sum = results.reduce((previous, current) => current += previous);\n        let avg = sum / results.length;\n        console.log(`avg: ${avg} ms`);\n        console.log(`sum: ${sum} ms`);\n    };\n\n    const handleOnMouseMove = useCallback((e) => {\n        if (draggedShip !== null && (e.buttons === 1 || e.buttons === 3)) {\n            setDraggingPosition({x: e.clientX, y: e.clientY});\n            handleDraggedShipSnapping()\n        }\n    }, [draggedShip, setDraggingPosition, handleDraggedShipSnapping]);\n\n    useEffect(() => {\n        document.addEventListener(\"mousemove\", handleOnMouseMove);\n\n        return () =>\n            document.removeEventListener(\"mousemove\", handleOnMouseMove)\n\n    }, [handleOnMouseMove]);\n\n    const handleOnMouseDown = useCallback((e) => {\n        if (e.buttons === 1 || e.buttons === 3) {\n            setDraggingPosition({x: e.clientX, y: e.clientY})\n        }\n\n    }, [setDraggingPosition]);\n\n    useEffect(() => {\n        document.addEventListener(\"mousedown\", handleOnMouseDown, false);\n\n        return () =>\n            document.removeEventListener(\"mousedown\", handleOnMouseDown, false)\n    }, [handleOnMouseDown]);\n\n    useEffect(() => {\n        document.addEventListener(\"mouseup\", handleOnMouseUp, false);\n\n        return () =>\n            document.removeEventListener(\"mouseup\", handleOnMouseUp, false)\n\n    }, [handleOnMouseUp]);\n\n    return (\n        <Fragment>\n            <div className=\"setup-wrapper\">\n                <Board placedShips={placedShips}\n                       handleCellMouseEnter={handleCellMouseEnter}\n                       handlePlacedShipDragging={handleDraggingOnPlacedShip}\n                       draggedShip={draggedShip}\n                       hoveredCell={hoveredCell}\n                       draggingPosition={draggingPosition}/>\n                <h2 className=\"u-h2\">\n                    {title}\n                </h2>\n                <button\n                    className=\"button\"\n                    onClick={fillBoardWithRandom}>\n                    Random layout\n                </button>\n                <button\n                    className=\"button button--desktop\"\n                    onClick={resetBoard}>\n                    Reset layout\n                </button>\n            </div>\n            <ShipSelector\n                allowedCounts={shipCountsOnBoard(placedShips)}\n                draggedShip={draggedShip}\n                setDraggedShip={handleDraggedShip}/>\n        </Fragment>\n    );\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\n\nexport default function Button({onClick, isDisabled, children, cn, outlined, isActive}) {\n    const cns = classNames(\"button\", {\"button--disabled\": isDisabled}, {\"button--outlined\": outlined}, {\"button--active\": isActive}, cn)\n\n    return (\n        <button className={cns}\n                onClick={onClick}>\n            {children}\n        </button>\n    )\n}\n","import React from \"react\";\nimport {BlankBoard, BoardShip, cellSize, gap} from \"./Board\";\nimport {getDimensions, groupBy, hullSize} from \"../core/util\";\nimport {placedShipsToBoard} from \"./SetupBoard\";\nimport hull from \"hull.js\"\nimport Button from \"../core/Button\";\nimport classNames from \"classnames\";\nimport {Ship} from \"./Ship\";\n\nfunction svgCoord(c, ct) {\n    return (c + ct + 1) * cellSize + ((c + ct + 1) * gap)\n}\n\nexport function PlacedShots({placedShots, shotSource}) {\n    if (placedShots) {\n        return (\n            <g className={`placed-shots placed-shots--${shotSource}`}>\n                {placedShots.map(([x, y]) => {\n                    return (\n                        <g className=\"placed-shots__group\" key={`${x}-${y}`}>\n                            <rect className=\"placed-shots__mask\"\n                                  stroke=\"transparent\"\n                                  fill=\"transparent\"\n                                  x={svgCoord(x, 0)}\n                                  y={svgCoord(y, 0)}\n                                  width={cellSize}\n                                  height={cellSize}\n                            />\n                            <circle\n                                className=\"placed-shots__shot\"\n                                cx={svgCoord(x, 0) + cellSize / 2}\n                                cy={svgCoord(y, 0) + cellSize / 2}\n                                r=\"1.5\"/>\n                        </g>\n                    )\n                })}\n            </g>\n        )\n\n    } else {\n        return null;\n    }\n}\n\nexport const addHit = (target, x, y) => {\n    if (target?.hits) {\n        const filteredHits = target.hits.filter(([hx, hy]) => !(hx === x && hy === y));\n        return {\n            ...target,\n            hits: [...filteredHits, [x, y]]\n        }\n    } else {\n        return {\n            ...target,\n            hits: [[x, y]]\n        }\n    }\n\n};\n\nexport const isSunken = ({template, hits}) => {\n    const size = template.flat(5).reduce((previous, current) => current += previous);\n    return size === hits.length\n};\n\n\nfunction ShipHits({hits}) {\n    return hits.map(([x, y]) => {\n        let sx = svgCoord(x, 0);\n        let sy = svgCoord(y, 0);\n        return (\n            <g className=\"bombed-cell__wrapper\"\n               key={`${x}-${y}`}>\n                <rect className=\"bombed-ship__cell\"\n                      x={sx}\n                      y={sy}\n                      width={cellSize}\n                      height={cellSize}\n                />\n                <path\n                    d={`M ${sx + 0.5} ${sy + 0.5} \n                        L ${sx + cellSize - .5} ${sy + cellSize - .5}\n                        M ${sx + 0.5} ${sy + cellSize - .5}\n                        L ${sx + cellSize - .5} ${sy + 0.5}`}\n                    strokeWidth=\"1\"\n                    stroke=\"var(--button-primary-bgcolor)\"/>\n            </g>\n        )\n    })\n}\n\nfunction HullToD(hull) {\n    let d = `M ${hull[0][0]} ${hull[0][1]}`;\n\n    for (let i = 1; i < hull.length; i++) {\n        d += ` ${hull[i][0]} ${hull[i][1]}`;\n    }\n\n    return d;\n}\n\nfunction ShipHull({ship}) {\n    let shipHull = [];\n    const {template, x, y} = ship;\n    const {rows, cols} = getDimensions(template);\n\n    for (let yt = 0; yt < rows; yt++) {\n        for (let xt = 0; xt < cols; xt++) {\n            if (template[yt][xt]) {\n                const x0 = svgCoord(x, xt) + 0.5;\n                const y0 = svgCoord(y, yt) + 0.5;\n\n                const x1 = x0 + cellSize - .5;\n                const y1 = y0 + cellSize - .5;\n\n                shipHull.push([x0, y0], [x0, y1], [x1, y0], [x1, y1])\n            }\n        }\n    }\n\n    return (\n        <path\n            fill=\"transparent\"\n            stroke=\"var(--button-primary-bgcolor)\"\n            strokeWidth=\"1\"\n            d={HullToD(hull(shipHull, 1))}\n        />\n    );\n}\n\nexport function BombedShips({ships}) {\n    return ships.map((ship) => {\n        const {isSunken, hits, uuid} = ship;\n\n        return (\n            <g key={uuid}\n               className={`bombed-ship bombed-ship--${isSunken}`}>\n                <ShipHits hits={hits}/>\n                {isSunken &&\n                <ShipHull ship={ship}/>}\n            </g>\n        )\n    })\n}\n\nexport function alreadyPlaced(x, y, shots) {\n    for (let i = 0, s = shots.length; i < s; i++) {\n        if (shots[i][0] === x && shots[i][1] === y) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction shipTemplatePoints({x, y, template}) {\n    const {rows, cols} = getDimensions(template);\n    let templatePoints = [];\n\n    for (let yt = 0; yt < rows; yt++) {\n        for (let xt = 0; xt < cols; xt++) {\n            if (template[yt][xt]) {\n                templatePoints.push([x + xt, y + yt])\n            }\n        }\n    }\n    return templatePoints;\n}\n\nexport function getComputerShots(ship, placedShots, placedAutoShots) {\n    const neighborDiff = [[-1, -1], [-1, 0], [-1, 1], [0, -1], [0, 1], [1, -1], [1, 0], [1, 1]];\n    const shipTemplate = shipTemplatePoints(ship);\n    const autoShots = [];\n\n    for (let i = 0; i < ship.hits.length; i++) {\n        const [hx, hy] = ship.hits[i];\n\n        for (let [xd, yd] of neighborDiff) {\n            const ny = hy + yd;\n            const nx = hx + xd;\n            if (ny > -1 && ny < 10 &&\n                nx > -1 && nx < 10) {\n                if (!alreadyPlaced(nx, ny, autoShots) &&\n                    !alreadyPlaced(nx, ny, placedShots) &&\n                    !alreadyPlaced(nx, ny, shipTemplate) &&\n                    !alreadyPlaced(nx, ny, placedAutoShots)) {\n                    autoShots.push([nx, ny]);\n                }\n            }\n        }\n\n    }\n\n    return autoShots;\n}\n\nconst templates = [\n    [[1]],\n    [[1, 1]],\n    [[1, 1, 1]],\n    [[1, 1, 1, 1]]\n]\n\nfunction TargetsRow({row}) {\n    const [size, ships] = row;\n\n    return (\n        <div className=\"targets__row\">\n            {\n                ships.sort((x,y)=> x.isSunken - y.isSunken)\n                    .reverse()\n                    .map((ship, index) => {\n                    return <Ship ship={templates[size - 1]}\n                                 isSmall={true}\n                                 isSunken={ship.isSunken}\n                                 key={`key-${size}-${index}`}\n                                 setDraggedShip={() => null}/>\n                })\n            }\n        </div>\n    )\n}\n\nfunction Targets({ships, gameState}) {\n    if (ships.length === 0) {\n        return null\n    }\n\n    const TargetShips = groupBy(ships.map(ship => {\n        return {\n            size: hullSize(ship.template),\n            isSunken: ship.isSunken === true\n        }\n    }), \"size\")\n\n    const cn = classNames(\"targets\", {\"targets--faded\": gameState !== \"PLAYING\"})\n\n    return (\n        <div className={cn}>\n            {\n                Object.entries(TargetShips).map((row, index) => <TargetsRow row={row} key={index}/>)\n            }\n        </div>\n    )\n}\n\nexport function EnemyBoard({usePlacedShots, useEnemyShips, title, gameCanStart, isDisabled, onStartClick, gameState, useAutoShots, onMissedShot, showShips}) {\n    const [placedShots, setPlacedShots] = usePlacedShots;\n    const [placedComputerShots, setPlacedComputerShots] = useAutoShots;\n\n    const [enemyShips, setEnemyShips] = useEnemyShips;\n\n    const onCellClick = ({x, y}) => {\n        let newPlaced = [...placedShots];\n        const board = placedShipsToBoard(enemyShips);\n\n        if (board[y][x]) {\n            let newPlaced = enemyShips.filter(sh => sh.uuid !== board[y][x]);\n            let targetShip = enemyShips.filter(s => s.uuid === board[y][x])[0];\n            targetShip = addHit(targetShip, x, y);\n\n            if (isSunken(targetShip)) {\n                targetShip.isSunken = true;\n                setPlacedComputerShots(placedComputerShots.concat(getComputerShots(targetShip, placedShots, placedComputerShots)))\n            }\n            setEnemyShips(newPlaced.concat([targetShip]))\n\n        } else {\n            onMissedShot()\n            setPlacedShots(newPlaced.concat([[x, y]]));\n        }\n    };\n\n    const cn = classNames(\"enemy-board\", {\"enemy-board--disabled\": isDisabled})\n    return (\n        <div className={cn}>\n            <div className=\"enemy-board__row\">\n                <BlankBoard handleCellMouseEnter={() => null}\n                            onCellClick={onCellClick}>\n                    {showShips &&\n                    enemyShips.map(ship => <BoardShip template={ship.template}\n                                                      uuid={ship.uuid}\n                                                      key={ship.uuid}\n                                                      handleMouseDown={() => null}\n                                                      x={ship.x}\n                                                      y={ship.y}/>)\n                    }\n                    <PlacedShots placedShots={placedShots}\n                                 shotSource=\"player\"/>\n                    <PlacedShots placedShots={placedComputerShots}\n                                 shotSource=\"computer\"/>\n                    <BombedShips ships={enemyShips.filter(s => s.hits?.length > 0)}/>\n                </BlankBoard>\n                <Targets\n                    gameState={gameState}\n                    ships={enemyShips}/>\n                {gameState === \"SETUP\" &&\n                <Button isDisabled={!gameCanStart}\n                        onClick={onStartClick}\n                        cn=\"button--start\">\n                    Start pew-pew\n                </Button>\n                }\n\n            </div>\n            <h2 className=\"u-h2\">\n                {title}\n            </h2>\n        </div>\n    );\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport {BlankBoard, BoardShip} from \"./Board\";\nimport {PlacedShots, BombedShips} from \"./EnemyBoard\"\n\n\nexport function PlayerBoard({useTakenShots, useTakenAutoShots, usePlacedShips, title, isDisabled, gameState}) {\n    const [takenShots] = useTakenShots;\n    const [takenAutoShots] = useTakenAutoShots;\n\n    const [enemyShips] = usePlacedShips;\n\n    const cn = classNames(\"player-board\", {\"player-board--disabled\": isDisabled})\n    return (\n        <div className={cn}>\n            <BlankBoard handleCellMouseEnter={() => null}\n                        onCellClick={() => null}>\n                <PlacedShots placedShots={takenShots}\n                             shotSource=\"player\"/>\n                <PlacedShots placedShots={takenAutoShots}\n                             shotSource=\"computer\"/>\n                {\n                    enemyShips.map(ship => <BoardShip template={ship.template}\n                                                      uuid={ship.uuid}\n                                                      key={ship.uuid}\n                                                      handleMouseDown={() => null}\n                                                      x={ship.x}\n                                                      y={ship.y}/>)\n                }\n\n                <BombedShips ships={enemyShips.filter(s => s.hits?.length > 0)}/>\n\n            </BlankBoard>\n            <h2 className=\"u-h2\">\n                {title}\n            </h2>\n        </div>\n    );\n}\n","import React from \"react\";\n\nexport default  function ButtonGroup({children}) {\n    return  (\n        <div className=\"button-group\">\n            {children}\n        </div>\n    )\n}\n","import React, {useContext} from \"react\";\nimport Button from \"../core/Button\";\nimport ButtonGroup from \"../core/ButtonGroup\";\nimport {GAME_MODES, GameSettingsContext} from \"../core/GameSettings\";\n\nexport default function Header({gameState}) {\n    const [gameSettings, setGameSettings] = useContext(GameSettingsContext);\n\n    return (\n        <header className=\"header\">\n            <div className=\"header__content\">\n                <h1 className=\"header__logo\">\n                    <span role=\"img\" aria-label=\"logo\">🚢</span> × <span role=\"img\" aria-label=\"logo\">💣</span>\n                </h1>\n                <ButtonGroup>\n                    <Button outlined={true}\n                            isDisabled={gameState === \"PLAYING\"}\n                            onClick={() => setGameSettings(GAME_MODES.simple)}\n                            isActive={gameSettings.name === \"simple\"}>\n                        Simple (<span role=\"img\" aria-label=\"flag\">🇺🇸</span>)\n                    </Button>\n                    <Button outlined={true}\n                            isDisabled={gameState === \"PLAYING\"}\n                            onClick={() => setGameSettings(GAME_MODES.advanced)}\n                            isActive={gameSettings.name === \"advanced\"}>\n                        Advanced (<span role=\"img\" aria-label=\"flag\">🇱🇻</span>)\n                    </Button>\n                </ButtonGroup>\n            </div>\n        </header>\n    )\n}\n","import Button from \"../core/Button\";\nimport React from \"react\";\n\nexport default function GameFinished({computerShips, isPlayerTurn, restartGame}) {\n    if (isPlayerTurn &&\n        computerShips.every(s => s.isSunken)) {\n        return (\n            <div className=\"game-finished\">\n                <h2 className=\"u-h2\">\n                    Congrats, you beat the computer!\n                    <span role=\"img\" aria-label=\"confetti\">🎉</span>\n                </h2>\n                <Button onClick={restartGame}>\n                    Dominate again!\n                </Button>\n            </div>\n\n        )\n    } else {\n        return (\n            <div className=\"game-finished\">\n                <h2 className=\"u-h2\">\n                    Tough luck, the Computer was superior!\n                </h2>\n                <Button onClick={restartGame}>\n                    Let me rematch!\n                </Button>\n            </div>\n\n        )\n    }\n\n}\n","import React, {useEffect, useRef} from \"react\";\n\n\nconst useDidUpdateEffect = (func, deps) => {\n    const didMount = useRef(false);\n\n    useEffect(() => {\n        if (didMount.current) func();\n        else didMount.current = true;\n    }, deps);\n}\n\nexport default useDidUpdateEffect;\n","import React, {useCallback, useEffect, useState} from 'react';\nimport {getRandomShipPlacement, isValidShipCount, placedShipsToBoard, SetupBoard} from \"./components/SetupBoard\";\nimport './App.scss';\nimport {addHit, alreadyPlaced, EnemyBoard, getComputerShots, isSunken} from \"./components/EnemyBoard\";\nimport {PlayerBoard} from \"./components/PlayerBoard\";\nimport {getRandomInt} from \"./core/util\"\nimport Header from \"./components/Header\";\nimport {GAME_MODES, GameSettingsContext} from \"./core/GameSettings\";\nimport GameFinished from \"./components/GameFinished\";\nimport useDidUpdateEffect from \"./core/useDidUpdateEffect\";\n\nconst placeShot = ({x, y}, placedShots, setPlacedShots, placedComputerShots, setPlacedComputerShots, enemyShips, setEnemyShips, onMissedShot) => {\n    let newPlaced = [...placedShots];\n    const board = placedShipsToBoard(enemyShips);\n\n    if (board[y][x]) {\n        let newPlaced = enemyShips.filter(sh => sh.uuid !== board[y][x]);\n        let targetShip = enemyShips.filter(s => s.uuid === board[y][x])[0];\n        targetShip = addHit(targetShip, x, y);\n\n        if (isSunken(targetShip)) {\n            targetShip.isSunken = true;\n            setPlacedComputerShots(placedComputerShots.concat(getComputerShots(targetShip, placedShots, placedComputerShots)))\n        }\n        setEnemyShips(newPlaced.concat([targetShip]))\n\n    } else {\n        onMissedShot()\n        setPlacedShots(newPlaced.concat([[x, y]]));\n    }\n};\n\nconst getRandomValidTarget = (ships, shots, autoShots) => {\n    const shipShots = ships.map(ship => ship.hits)\n        .filter(hit => hit !== undefined)\n        .flat()\n\n    let allPositions = [];\n\n    for (let y = 0; y < 10; y++) {\n        for (let x = 0; x < 10; x++) {\n            allPositions.push([x, y]);\n        }\n    }\n\n    const filteredPos = allPositions\n        .filter(([x, y]) => !alreadyPlaced(x, y, shipShots))\n        .filter(([x, y]) => !alreadyPlaced(x, y, shots))\n        .filter(([x, y]) => !alreadyPlaced(x, y, autoShots))\n\n\n    return filteredPos[getRandomInt(0, filteredPos.length - 1)]\n};\n\nconst getDiffArray = (mode, hits, shots) => {\n    if (mode === \"advanced\" || hits.length === 1) {\n        return [[0, -1], [1, 0], [0, 1], [-1, 0]]\n    } else {\n        const direction = hits[0][0] === hits[1][0] ? \"vertical\" : \"horizontal\";\n\n        if (direction === \"horizontal\") {\n            return [[1, 0], [-1, 0]];\n        } else {\n            return [[0, 1], [0, -1]];\n        }\n    }\n}\n\nconst chooseTarget = (modeName, {hits}, shots, autoShots) => {\n    const shotsCombined = shots.concat(autoShots);\n    let pHits = [];\n\n    const diffs = getDiffArray(modeName, hits, shotsCombined);\n\n    for (let [hx, hy] of hits) {\n        for (let [xd, yd] of diffs) {\n            const ny = hy + yd;\n            const nx = hx + xd;\n            if ((ny > -1 && ny < 10) &&\n                (nx > -1 && nx < 10) &&\n                !alreadyPlaced(nx, ny, shotsCombined) &&\n                !alreadyPlaced(nx, ny, hits)) {\n                pHits.push([nx, ny])\n            }\n        }\n    }\n    return pHits[getRandomInt(0, pHits.length - 1)]\n}\n\n\nfunction App() {\n    const [gameState, setGameState] = useState(\"SETUP\");\n    const [isPlayerTurn, setIsPlayerTurn] = useState(true);\n\n    const [gameSettings, setGameSettings] = useState(GAME_MODES.advanced);\n\n    const [playerPlacedShips, setPlayerPlacedShips] = useState(getRandomShipPlacement(gameSettings.shipConfig));\n    const [playerPlacedShots, setPlayerPlacedShots] = useState([])\n    const [playerPlacedAutoShots, setPlayerPlacedAutoShots] = useState([])\n\n    const [computerPlacedShips, setComputerPlacedShips] = useState(getRandomShipPlacement(gameSettings.shipConfig));\n    const [computerPlacedShots, setComputerPlacedShots] = useState([])\n    const [computerPlacedAutoShots, setComputerPlacedAutoShots] = useState([])\n\n    const resetGame = useCallback(() => {\n        setPlayerPlacedShips(getRandomShipPlacement(gameSettings.shipConfig))\n        setComputerPlacedShips(getRandomShipPlacement(gameSettings.shipConfig))\n        setPlayerPlacedShots([])\n        setPlayerPlacedAutoShots([])\n        setComputerPlacedShots([])\n        setComputerPlacedAutoShots([])\n        setGameState(\"SETUP\")\n    }, [gameSettings, setPlayerPlacedShips, setComputerPlacedShips, setPlayerPlacedShots, setPlayerPlacedAutoShots, setComputerPlacedShots, setComputerPlacedAutoShots, setGameState])\n\n    useEffect(() => {\n        let timer = null;\n        // computer's turn to make a move\n        if (gameState === \"PLAYING\" && !isPlayerTurn) {\n            timer = setTimeout(() => {\n                let woundedShip = playerPlacedShips.filter(ship => ship.hits?.length > 0 && !ship.isSunken)\n\n                if (woundedShip[0]) {\n                    const [x, y] = chooseTarget(gameSettings.name, woundedShip[0], computerPlacedShots, computerPlacedAutoShots)\n                    placeShot({x, y},\n                        computerPlacedShots, setComputerPlacedShots,\n                        computerPlacedAutoShots, setComputerPlacedAutoShots,\n                        playerPlacedShips, setPlayerPlacedShips,\n                        () => setIsPlayerTurn(true))\n                } else {\n                    const [x, y] = getRandomValidTarget(playerPlacedShips, computerPlacedShots, computerPlacedAutoShots);\n                    placeShot({x, y},\n                        computerPlacedShots, setComputerPlacedShots,\n                        computerPlacedAutoShots, setComputerPlacedAutoShots,\n                        playerPlacedShips, setPlayerPlacedShips,\n                        () => setIsPlayerTurn(true))\n                }\n            }, 400)\n\n        }\n        return () => clearTimeout(timer)\n    }, [gameState, gameSettings.name, isPlayerTurn,\n        computerPlacedShots, setComputerPlacedShots,\n        computerPlacedAutoShots, setComputerPlacedAutoShots,\n        playerPlacedShips, setPlayerPlacedShips,\n        setIsPlayerTurn])\n\n    useEffect(() => {\n        if ((computerPlacedShips.every(ship => ship.isSunken) && computerPlacedShips.length > 0) ||\n            (playerPlacedShips.every(ship => ship.isSunken) && playerPlacedShips.length > 0)) {\n            setGameState(\"FINISHED\")\n        }\n    }, [playerPlacedShips, computerPlacedShips, setGameState])\n\n    useDidUpdateEffect(() => {\n        setPlayerPlacedShips(getRandomShipPlacement(gameSettings.shipConfig))\n        setComputerPlacedShips(getRandomShipPlacement(gameSettings.shipConfig))\n        setPlayerPlacedShots([])\n        setPlayerPlacedAutoShots([])\n        setComputerPlacedShots([])\n        setComputerPlacedAutoShots([])\n        setGameState(\"SETUP\")\n    }, [gameSettings.name, setPlayerPlacedShips, setComputerPlacedShips, setPlayerPlacedShots, setPlayerPlacedAutoShots, setComputerPlacedShots, setComputerPlacedAutoShots, setGameState])\n\n    return (\n        <GameSettingsContext.Provider value={[gameSettings, setGameSettings]}>\n            <div className=\"App\">\n                <Header gameState={gameState}/>\n                {gameState === \"FINISHED\" &&\n                <GameFinished computerShips={computerPlacedShips}\n                              isPlayerTurn={isPlayerTurn}\n                              restartGame={resetGame}/>\n                }\n                <div className=\"App__row\">\n                    {gameState === \"SETUP\" &&\n                    <SetupBoard\n                        title=\"Your‍ board\"\n                        usePlacedShips={[playerPlacedShips, setPlayerPlacedShips]}/>\n                    }\n                    {gameState !== \"SETUP\" &&\n                    <PlayerBoard\n                        title=\"Your‍ board\"\n                        isDisabled={gameState !== \"PLAYING\"}\n                        usePlacedShips={[playerPlacedShips, setPlayerPlacedShips]}\n                        useTakenShots={[computerPlacedShots, setComputerPlacedShots]}\n                        useTakenAutoShots={[computerPlacedAutoShots, computerPlacedAutoShots]}\n                    />\n                    }\n                    <EnemyBoard\n                        title=\"Computer's board\"\n                        gameCanStart={isValidShipCount(playerPlacedShips)}\n                        onMissedShot={() => setIsPlayerTurn(false)}\n                        gameState={gameState}\n                        onStartClick={() => setGameState(\"PLAYING\")}\n                        showShips={gameState === \"FINISHED\"}\n                        isDisabled={gameState !== \"PLAYING\" || !isPlayerTurn}\n                        useEnemyShips={[computerPlacedShips, setComputerPlacedShips]}\n                        usePlacedShots={[playerPlacedShots, setPlayerPlacedShots]}\n                        useAutoShots={[playerPlacedAutoShots, setPlayerPlacedAutoShots]}\n                    />\n                </div>\n                {/*<div className={\"App__row\"}>*/}\n                {/*    {gameState === \"SETUP\" &&*/}\n                {/*    <SetupBoard*/}\n                {/*        title=\"Computer's board\"*/}\n                {/*        usePlacedShips={[computerPlacedShips, setComputerPlacedShips]}/>*/}\n                {/*    }*/}\n                {/*    {gameState === \"PLAYING\" &&*/}\n                {/*    <PlayerBoard*/}\n                {/*        title=\"Computer's board\"*/}\n                {/*        isDisabled={gameState !== \"PLAYING\"}*/}\n                {/*        usePlacedShips={[computerPlacedShips]}*/}\n                {/*        useTakenShots={[playerPlacedShots]}*/}\n                {/*        useTakenAutoShots={[playerPlacedAutoShots]}*/}\n                {/*    />*/}\n                {/*    }*/}\n                {/*    <EnemyBoard*/}\n                {/*        title=\"Player's board\"*/}\n                {/*        gameCanStart={isValidShipCount(playerPlacedShips)}*/}\n                {/*        onMissedShot={() => setIsPlayerTurn(true)}*/}\n                {/*        gameState={gameState}*/}\n                {/*        onStartClick={() => setGameState(\"PLAYING\")}*/}\n                {/*        isDisabled={gameState !== \"PLAYING\" || isPlayerTurn}*/}\n                {/*        useEnemyShips={[playerPlacedShips, setPlayerPlacedShips]}*/}\n                {/*        usePlacedShots={[computerPlacedShots, setComputerPlacedShots]}*/}\n                {/*        useAutoShots={[computerPlacedAutoShots, setComputerPlacedAutoShots]}/>*/}\n                {/*</div>*/}\n            </div>\n        </GameSettingsContext.Provider>\n    )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}