(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{11:function(e,t,n){e.exports=n(22)},16:function(e,t,n){},17:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),i=(n(16),n(4)),l=n(1),u=n(3),s=n(5);function m(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}function f(e){return{rows:e.length,cols:e[0].length}}function d(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var h=function(e){return e.flat(2).reduce((function(e,t){return t+e}))};var p=n(2),v=n.n(p),b=r.a.memo((function(e){var t=e.ship,n=e.setDraggedShip,c=e.cellSize,o=void 0===c?10:c,i=e.gap,l=void 0===i?1:i,u=e.isSunken,s=e.isSmall,m=f(t),d=m.rows,h=m.cols,p=o*h+h-1,b=o*d+d-1,g=Object(a.useCallback)((function(e,a){n(t,e,a)}),[n,t]),E=v()("ship ship--".concat(h),{"ship--small":s},{"ship--sunken":u});return r.a.createElement("div",{className:E,onMouseDown:function(e){g(-1,-1)}},r.a.createElement("svg",{viewBox:"0 0 ".concat(p," ").concat(b),xmlns:"http://www.w3.org/2000/svg"},t.map((function(e,t){return e.map((function(e,n){return e?r.a.createElement("rect",{key:"".concat(n,":").concat(t),fill:"white",stroke:"transparent",x:n*o+n*l,y:t*o+t*l,width:o,height:o,onMouseDown:function(e){g(n,t),e.stopPropagation()}}):null}))}))))})),g=r.a.memo((function(e){return null===e.ship?null:r.a.createElement(b,e)})),E=function(e){for(var t=f(e),n=t.rows,a=t.cols,r=new Array(a).fill().map((function(){return new Array(n).fill(0)})),c=0;c<n;c++)for(var o=0;o<a;o++)r[a-o-1][c]=e[c][o];return r},y=r.a.memo((function(e){var t=e.templates,n=e.setDraggedShip,c=e.draggedShip,o=e.w,i=Object(a.useState)(!1),u=Object(l.a)(i,2),s=u[0],m=u[1],f=Object(a.useCallback)((function(e,t,a){n(e,t,a),m(!1)}),[m,n]);return r.a.createElement("div",{className:"ship-with-tooltip",onMouseLeave:function(){return m(!1)}},r.a.createElement("div",{onMouseEnter:function(){return m(!0)}},r.a.createElement(g,{ship:t[0],setDraggedShip:f})),t.length>1&&null===c&&s&&r.a.createElement("div",{className:"ship-with-tooltip__box",style:{width:o}},t.map((function(e,t){return r.a.createElement(g,{ship:e,key:"key-".concat(t),setDraggedShip:f})}))))})),S=r.a.memo((function(e){var t=e.allowed,n=e.children,a=v()("ship-group",{"ship-group--disabled":t<=0});return r.a.createElement("div",{className:a},r.a.createElement("div",{className:"ship-group__label"},t,"\xd7"),n)})),w=r.a.memo((function(e){var t=e.draggedShip,n=e.setDraggedShip,c=e.allowedCounts,o=Object(a.useContext)(P),i=Object(l.a)(o,1)[0];return r.a.createElement("div",{className:"ship-selector"},i.shipConfig.map((function(e,a){return r.a.createElement(S,{key:"group-".concat(a),allowed:c[a]},e.map((function(e,c){return r.a.createElement(y,{key:"ship-".concat(a,"-").concat(c),draggedShip:t,setDraggedShip:n,w:e.w,templateName:"ship-".concat(a,"-").concat(c),templates:e.t})})))})))})),O=function(e){for(var t=e.template,n=e.mutations,a=[t],r=0;r<n;r++)a.push(E(a[r]));return a},j=O({mutations:0,template:[[1]]}),k=O({mutations:1,template:[[1,1]]}),x=O({mutations:1,template:[[1,1,1]]}),C=O({mutations:3,template:[[1,1],[1,0]]}),N=O({mutations:0,template:[[1,1],[1,1]]}),M=O({mutations:1,template:[[1,1,1,1]]}),D={simple:{name:"simple",cols:"ABCDEFGHIJ",shipConfig:[[{t:j,w:null}],[{t:k,w:170}],[{t:x,w:210}],[{t:M,w:245}]]},advanced:{name:"advanced",cols:"KARTUPELIS",shipConfig:[[{t:j,w:null}],[{t:k,w:170}],[{t:x,w:210},{t:C,w:385}],[{t:M,w:245},{t:N,w:null},{t:O({mutations:3,template:[[1,1,1],[1,0,0]]}).concat(O({mutations:3,template:[[1,0,0],[1,1,1]]})),w:459},{t:O({mutations:3,template:[[0,1,0],[1,1,1]]}),w:459},{t:O({mutations:1,template:[[1,1,0],[0,1,1]]}).concat(O({mutations:1,template:[[0,1,1],[1,1,0]]})),w:459}]]}},P=r.a.createContext(D.advanced),A=[1,2,3,4,5,6,7,8,9,10],_=r.a.memo((function(e){var t=e.x,n=e.y,a=e.template,c=e.cellSize,o=void 0===c?10:c,i=e.gap,l=void 0===i?1:i,u=e.handleMouseDown,s=e.uuid;return r.a.createElement("g",{className:"board-ship",onMouseDown:function(){return u(-1,-1)}},a.map((function(e,a){return e.map((function(e,c){return e?r.a.createElement("rect",{key:"".concat(s,"-").concat(a,"-").concat(c),onMouseDown:function(e){u(c,a),e.stopPropagation()},strokeWidth:"2",stroke:"transparent",x:(t+c+1)*o+(t+c+1)*l,y:(n+a+1)*o+(n+a+1)*l,width:o,height:o}):null}))})))})),L=function(e){return e.inBounds?e.isOverlapping?"#b80d57":"white":"#ffd868"},I=function(e,t,n){var a=e.length,r=100/e[0].length,c=100/a;return"translate(-".concat(r/2+r*t,"%, -").concat(c/2+c*n,"%)")},T=r.a.memo((function(e){var t=e.letters,n=e.handleMouseEnter;return r.a.createElement("g",{className:"letter-row"},t.map((function(e,t){return r.a.createElement("g",{key:e},r.a.createElement("rect",{stroke:"var(--body-background)",strokeWidth:"2",fill:"var(--body-background)",x:10*(t+1)+1*(t+1),y:"0",width:10,height:10,onMouseEnter:n}),r.a.createElement("text",{x:10*(t+1)+1*t,y:10,transform:"translate(3,-2)",textLength:10,fill:"white",style:{fontSize:"9"}},e))})))})),B=r.a.memo((function(e){var t=e.numbers,n=e.handleMouseEnter;return r.a.createElement("g",{className:"number-col"},t.map((function(e,t){return r.a.createElement("g",{key:e},r.a.createElement("rect",{stroke:"var(--body-background)",strokeWidth:"2",fill:"var(--body-background)",x:"0",y:10*(t+1)+1*(t+1),width:10,height:10,onMouseEnter:n}),r.a.createElement("text",{x:"0",y:10*(t+2)+1*t,textLength:10,fill:"white",transform:"translate(0,-2)",onMouseEnter:n,style:{fontSize:"9"}},e))})))})),Y=r.a.memo((function(e){var t=e.cols,n=e.rows,a=e.handleMouseEnter,c=e.className,o=e.handleClick,i=void 0===o?function(){return null}:o;return r.a.createElement("g",{className:"blank-placeholders"},t.map((function(e,t){return n.map((function(n,o){return r.a.createElement("rect",{key:"".concat(e,":").concat(n),className:c,stroke:"transparent",fill:"#109DAC",x:10*(t+1)+1*(t+1),y:10*(o+1)+1*(o+1),width:10,height:10,onClick:function(){return i({x:t,y:o})},onMouseEnter:function(){return a({x:t,y:o})}})}))})))}));function G(e){var t=e.placedShips,n=e.draggingPosition,c=e.handleCellMouseEnter,o=e.draggedShip,i=e.handlePlacedShipDragging,s=Object(a.useContext)(P),m=Object(l.a)(s,1)[0],f=Object(u.a)(m.cols);return r.a.createElement("div",{className:"board"},o&&o.isDragging&&r.a.createElement("div",{style:{position:"fixed",zIndex:"2",left:n.x,top:n.y,pointerEvents:"none",transform:I(o.template,o.offset.x,o.offset.y)}},r.a.createElement(g,{ship:o.template})),r.a.createElement("svg",{viewBox:"0 0 ".concat(121," ").concat(121),onMouseLeave:function(){return c({x:-1,y:-1})},xmlns:"http://www.w3.org/2000/svg"},r.a.createElement(Y,{cols:f,rows:A,handleMouseEnter:c}),r.a.createElement("g",{style:o?{pointerEvents:"none",fill:"white"}:{cursor:"pointer",fill:"white"}},t.map((function(e){return r.a.createElement(_,{template:e.template,uuid:e.uuid,key:e.uuid,handleMouseDown:function(t,n){return i(e,t,n)},x:e.x,y:e.y})}))),o&&o.isSnapping&&r.a.createElement("g",{style:{pointerEvents:"none",fill:L(o)}},r.a.createElement(_,{template:o.template,uuid:o.uuid,x:o.x,y:o.y})),r.a.createElement(T,{letters:f,handleMouseEnter:function(){return c({x:-1,y:-1})}}),r.a.createElement(B,{numbers:A,handleMouseEnter:function(){return c({x:-1,y:-1})}})))}function z(e){var t=e.onCellClick,n=e.handleCellMouseEnter,c=e.children,o=Object(a.useContext)(P),i=Object(l.a)(o,1)[0],s=Object(u.a)(i.cols);return r.a.createElement("div",{className:"board"},r.a.createElement("svg",{viewBox:"0 0 ".concat(121," ").concat(121),onMouseLeave:function(){return n({x:-1,y:-1})},xmlns:"http://www.w3.org/2000/svg"},r.a.createElement(Y,{cols:s,rows:A,className:"board-hover",handleClick:t,handleMouseEnter:n}),r.a.createElement(T,{letters:s,handleMouseEnter:function(){return n({x:-1,y:-1})}}),r.a.createElement(B,{numbers:A,handleMouseEnter:function(){return n({x:-1,y:-1})}}),c))}var U=function(e,t,n){var a=f(n),r=a.rows,c=a.cols;return!(e<0||t<0)&&(r+t<11&&c+e<11)},W=function(e,t){for(var n=e.x,a=e.y,r=e.template,c=e.uuid,o=f(r),i=o.rows,l=o.cols,u=0;u<i;u++)for(var s=0;s<l;s++)t[a+u][n+s]=r[u][s]?c:""},F=function(e){var t,n=new Array(10).fill().map((function(){return new Array(10).fill("")})),a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;W(r,n)}}catch(c){a.e(c)}finally{a.f()}return n},R=[[-1,-1],[-1,0],[-1,1],[0,0],[0,-1],[0,1],[1,-1],[1,0],[1,1]],V=function(e,t,n,a){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:F(a),c=f(n),o=c.rows,u=c.cols,s=0;s<o;s++)for(var m=0;m<u;m++)if(n[s][m]){var d,h=Object(i.a)(R);try{for(h.s();!(d=h.n()).done;){var p=Object(l.a)(d.value,2),v=p[0],b=p[1],g=s+t+b,E=m+e+v;if(g>-1&&g<10&&E>-1&&E<10&&""!==r[g][E])return!0}}catch(y){h.e(y)}finally{h.f()}}return!1},H=function(e,t,n){return-1===t&&-1===n?function(e){var t=f(e),n=t.rows,a=t.cols;return{x:Math.floor((a-1)/2),y:Math.floor((n-1)/2)}}(e):{x:t,y:n}},J=function(e,t){for(var n=[],a=0;a<10;a++)for(var r=0;r<10;r++)U(r,a,t)&&!V(r,a,t,[],e)&&n.push([r,a]);return n},X=function e(t){for(var n=new Array(10).fill().map((function(){return new Array(10).fill("")})),a=t.map((function(e){return[e.map((function(e){return e.t})).flat()]})).flat(),r=[],c=[],o=0;o<4;o++)for(var i=0;i<4-o;i++){var u=d(0,a[o].length-1);r.push(a[o][u])}for(var s=9;s>=0;s--){var f=J(n,r[s]);if(f.length>0){var h=Object(l.a)(f[d(0,f.length-1)],2),p=h[0],v=h[1];c.push({uuid:m(),x:p,y:v,template:r[s],inBounds:!0,isOverlapping:!1,isDragging:!1,isSnapping:!0}),W({x:p,y:v,template:r[s]},n)}else e(t)}return c},K=function(e){var t,n=[4,3,2,1],a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[h(r.template)-1]--}}catch(c){a.e(c)}finally{a.f()}return n};function $(e){var t=e.usePlacedShips,n=e.title,c=Object(l.a)(t,2),o=c[0],i=c[1],f=Object(a.useState)(null),d=Object(l.a)(f,2),h=d[0],p=d[1],v=Object(a.useState)({x:0,y:0}),b=Object(l.a)(v,2),g=b[0],E=b[1],y=Object(a.useState)({x:-1,y:-1}),S=Object(l.a)(y,2),O=S[0],j=S[1],k=Object(a.useContext)(P),x=Object(l.a)(k,1)[0],C=Object(a.useCallback)((function(e){var t=e.x,n=e.y;j({x:t,y:n})}),[j]),N=Object(a.useCallback)((function(e,t,n){var a=m(),r=H(e,t,n);p({template:e,uuid:a,isDragging:!0,isSnapping:!1,offset:r,x:-1e5,y:-1e5})}),[p]),M=Object(a.useCallback)((function(){var e=O.x>-1&&O.y>-1,t=O.x-h.offset.x,n=O.y-h.offset.y,a=Object(s.a)({},h,{x:t,y:n,inBounds:U(t,n,h.template),isOverlapping:V(t,n,h.template,o),isDragging:!e,isSnapping:e});p(a)}),[h,p,O,o]),D=Object(a.useCallback)((function(e){if((null===h||void 0===h?void 0:h.isSnapping)&&h.inBounds&&!h.isOverlapping){var t=Object(u.a)(o);i(t.concat([Object(s.a)({},h)])),p(null),E({x:-1e3,y:-1e3})}else{if((null===h||void 0===h?void 0:h.lastValidPosition)&&h.inBounds){var n=Object(u.a)(o);i(n.concat([Object(s.a)({},h,{x:h.lastValidPosition.x,y:h.lastValidPosition.y})]))}E({x:-1e3,y:-1e3}),p(null)}}),[h,o,p,i,E]),A=Object(a.useCallback)((function(e,t,n){var a=o.filter((function(t){return t.uuid!==e.uuid}));e.offset=H(e.template,t,n),e.lastValidPosition={x:e.x,y:e.y},p(e),i(a)}),[o,i,p]),_=function(){i(X(x.shipConfig))},L=Object(a.useCallback)((function(e){null===h||1!==e.buttons&&3!==e.buttons||(E({x:e.clientX,y:e.clientY}),M())}),[h,E,M]);Object(a.useEffect)((function(){return document.addEventListener("mousemove",L),function(){return document.removeEventListener("mousemove",L)}}),[L]);var I=Object(a.useCallback)((function(e){1!==e.buttons&&3!==e.buttons||E({x:e.clientX,y:e.clientY})}),[E]);return Object(a.useEffect)((function(){return document.addEventListener("mousedown",I,!1),function(){return document.removeEventListener("mousedown",I,!1)}}),[I]),Object(a.useEffect)((function(){return document.addEventListener("mouseup",D,!1),function(){return document.removeEventListener("mouseup",D,!1)}}),[D]),r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"setup-wrapper"},r.a.createElement(G,{placedShips:o,handleCellMouseEnter:C,handlePlacedShipDragging:A,draggedShip:h,hoveredCell:O,draggingPosition:g}),r.a.createElement("h2",{className:"u-h2"},n),r.a.createElement("button",{className:"button",onClick:_},"Random layout"),r.a.createElement("button",{className:"button button--desktop",onClick:function(){i([])}},"Reset layout")),r.a.createElement(w,{allowedCounts:K(o),draggedShip:h,setDraggedShip:N}))}n(17);var q=n(10),Q=n.n(q);function Z(e){var t=e.onClick,n=e.isDisabled,a=e.children,c=e.cn,o=e.outlined,i=e.isActive,l=v()("button",{"button--disabled":n},{"button--outlined":o},{"button--active":i},c);return r.a.createElement("button",{className:l,onClick:t},a)}function ee(e,t){return 10*(e+t+1)+1*(e+t+1)}function te(e){var t=e.placedShots,n=e.shotSource;return t?r.a.createElement("g",{className:"placed-shots placed-shots--".concat(n)},t.map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return r.a.createElement("g",{className:"placed-shots__group",key:"".concat(n,"-").concat(a)},r.a.createElement("rect",{className:"placed-shots__mask",stroke:"transparent",fill:"transparent",x:ee(n,0),y:ee(a,0),width:10,height:10}),r.a.createElement("circle",{className:"placed-shots__shot",cx:ee(n,0)+5,cy:ee(a,0)+5,r:"1.5"}))}))):null}var ne=function(e,t,n){if(null===e||void 0===e?void 0:e.hits){var a=e.hits.filter((function(e){var a=Object(l.a)(e,2),r=a[0],c=a[1];return!(r===t&&c===n)}));return Object(s.a)({},e,{hits:[].concat(Object(u.a)(a),[[t,n]])})}return Object(s.a)({},e,{hits:[[t,n]]})},ae=function(e){var t=e.template,n=e.hits;return t.flat(5).reduce((function(e,t){return t+e}))===n.length};function re(e){return e.hits.map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1],c=ee(n,0),o=ee(a,0);return r.a.createElement("g",{className:"bombed-cell__wrapper",key:"".concat(n,"-").concat(a)},r.a.createElement("rect",{className:"bombed-ship__cell",x:c,y:o,width:10,height:10}),r.a.createElement("path",{d:"M ".concat(c+.5," ").concat(o+.5," \n                        L ").concat(c+10-.5," ").concat(o+10-.5,"\n                        M ").concat(c+.5," ").concat(o+10-.5,"\n                        L ").concat(c+10-.5," ").concat(o+.5),strokeWidth:"1",stroke:"var(--button-primary-bgcolor)"}))}))}function ce(e){for(var t="M ".concat(e[0][0]," ").concat(e[0][1]),n=1;n<e.length;n++)t+=" ".concat(e[n][0]," ").concat(e[n][1]);return t}function oe(e){for(var t=e.ship,n=[],a=t.template,c=t.x,o=t.y,i=f(a),l=i.rows,u=i.cols,s=0;s<l;s++)for(var m=0;m<u;m++)if(a[s][m]){var d=ee(c,m)+.5,h=ee(o,s)+.5,p=d+10-.5,v=h+10-.5;n.push([d,h],[d,v],[p,h],[p,v])}return r.a.createElement("path",{fill:"transparent",stroke:"var(--button-primary-bgcolor)",strokeWidth:"1",d:ce(Q()(n,1))})}function ie(e){return e.ships.map((function(e){var t=e.isSunken,n=e.hits,a=e.uuid;return r.a.createElement("g",{key:a,className:"bombed-ship bombed-ship--".concat(t)},r.a.createElement(re,{hits:n}),t&&r.a.createElement(oe,{ship:e}))}))}function le(e,t,n){for(var a=0,r=n.length;a<r;a++)if(n[a][0]===e&&n[a][1]===t)return!0;return!1}function ue(e,t,n){for(var a=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],r=function(e){for(var t=e.x,n=e.y,a=e.template,r=f(a),c=r.rows,o=r.cols,i=[],l=0;l<c;l++)for(var u=0;u<o;u++)a[l][u]&&i.push([t+u,n+l]);return i}(e),c=[],o=0;o<e.hits.length;o++){var u,s=Object(l.a)(e.hits[o],2),m=s[0],d=s[1],h=Object(i.a)(a);try{for(h.s();!(u=h.n()).done;){var p=Object(l.a)(u.value,2),v=p[0],b=d+p[1],g=m+v;b>-1&&b<10&&g>-1&&g<10&&(le(g,b,c)||le(g,b,t)||le(g,b,r)||le(g,b,n)||c.push([g,b]))}}catch(E){h.e(E)}finally{h.f()}}return c}var se=[[[1]],[[1,1]],[[1,1,1]],[[1,1,1,1]]];function me(e){var t=e.row,n=Object(l.a)(t,2),a=n[0],c=n[1];return r.a.createElement("div",{className:"targets__row"},c.sort((function(e,t){return e.isSunken-t.isSunken})).reverse().map((function(e,t){return r.a.createElement(g,{ship:se[a-1],isSmall:!0,isSunken:e.isSunken,key:"key-".concat(a,"-").concat(t),setDraggedShip:function(){return null}})})))}function fe(e){var t=e.ships,n=e.gameState;if(0===t.length)return null;var a,c,o=(a=t.map((function(e){return{size:h(e.template),isSunken:!0===e.isSunken}})),c="size",a.reduce((function(e,t){var n=t[c];return e[n]||(e[n]=[]),e[n].push(t),e}),{})),i=v()("targets",{"targets--faded":"PLAYING"!==n});return r.a.createElement("div",{className:i},Object.entries(o).map((function(e,t){return r.a.createElement(me,{row:e,key:t})})))}function de(e){var t=e.usePlacedShots,n=e.useEnemyShips,a=e.title,c=e.gameCanStart,o=e.isDisabled,i=e.onStartClick,s=e.gameState,m=e.useAutoShots,f=e.onMissedShot,d=e.showShips,h=Object(l.a)(t,2),p=h[0],b=h[1],g=Object(l.a)(m,2),E=g[0],y=g[1],S=Object(l.a)(n,2),w=S[0],O=S[1],j=v()("enemy-board",{"enemy-board--disabled":o});return r.a.createElement("div",{className:j},r.a.createElement("div",{className:"enemy-board__row"},r.a.createElement(z,{handleCellMouseEnter:function(){return null},onCellClick:function(e){var t=e.x,n=e.y,a=Object(u.a)(p),r=F(w);if(r[n][t]){var c=w.filter((function(e){return e.uuid!==r[n][t]})),o=w.filter((function(e){return e.uuid===r[n][t]}))[0];o=ne(o,t,n),ae(o)&&(o.isSunken=!0,y(E.concat(ue(o,p,E)))),O(c.concat([o]))}else f(),b(a.concat([[t,n]]))}},d&&w.map((function(e){return r.a.createElement(_,{template:e.template,uuid:e.uuid,key:e.uuid,handleMouseDown:function(){return null},x:e.x,y:e.y})})),r.a.createElement(te,{placedShots:p,shotSource:"player"}),r.a.createElement(te,{placedShots:E,shotSource:"computer"}),r.a.createElement(ie,{ships:w.filter((function(e){var t;return(null===(t=e.hits)||void 0===t?void 0:t.length)>0}))})),r.a.createElement(fe,{gameState:s,ships:w}),"SETUP"===s&&r.a.createElement(Z,{isDisabled:!c,onClick:i,cn:"button--start"},"Start pew-pew")),r.a.createElement("h2",{className:"u-h2"},a))}function he(e){var t=e.useTakenShots,n=e.useTakenAutoShots,a=e.usePlacedShips,c=e.title,o=e.isDisabled,i=(e.gameState,Object(l.a)(t,1)[0]),u=Object(l.a)(n,1)[0],s=Object(l.a)(a,1)[0],m=v()("player-board",{"player-board--disabled":o});return r.a.createElement("div",{className:m},r.a.createElement(z,{handleCellMouseEnter:function(){return null},onCellClick:function(){return null}},r.a.createElement(te,{placedShots:i,shotSource:"player"}),r.a.createElement(te,{placedShots:u,shotSource:"computer"}),s.map((function(e){return r.a.createElement(_,{template:e.template,uuid:e.uuid,key:e.uuid,handleMouseDown:function(){return null},x:e.x,y:e.y})})),r.a.createElement(ie,{ships:s.filter((function(e){var t;return(null===(t=e.hits)||void 0===t?void 0:t.length)>0}))})),r.a.createElement("h2",{className:"u-h2"},c))}function pe(e){var t=e.children;return r.a.createElement("div",{className:"button-group"},t)}function ve(e){var t=e.gameState,n=Object(a.useContext)(P),c=Object(l.a)(n,2),o=c[0],i=c[1];return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__content"},r.a.createElement("h1",{className:"header__logo"},r.a.createElement("span",{role:"img","aria-label":"logo"},"\ud83d\udea2")," \xd7 ",r.a.createElement("span",{role:"img","aria-label":"logo"},"\ud83d\udca3")),r.a.createElement(pe,null,r.a.createElement(Z,{outlined:!0,isDisabled:"PLAYING"===t,onClick:function(){return i(D.simple)},isActive:"simple"===o.name},"Simple (",r.a.createElement("span",{role:"img","aria-label":"flag"},"\ud83c\uddfa\ud83c\uddf8"),")"),r.a.createElement(Z,{outlined:!0,isDisabled:"PLAYING"===t,onClick:function(){return i(D.advanced)},isActive:"advanced"===o.name},"Advanced (",r.a.createElement("span",{role:"img","aria-label":"flag"},"\ud83c\uddf1\ud83c\uddfb"),")"))))}function be(e){var t=e.computerShips,n=e.isPlayerTurn,a=e.restartGame;return n&&t.every((function(e){return e.isSunken}))?r.a.createElement("div",{className:"game-finished"},r.a.createElement("h2",{className:"u-h2"},"Congrats, you beat the computer!",r.a.createElement("span",{role:"img","aria-label":"confetti"},"\ud83c\udf89")),r.a.createElement(Z,{onClick:a},"Dominate again!")):r.a.createElement("div",{className:"game-finished"},r.a.createElement("h2",{className:"u-h2"},"Tough luck, the Computer was superior!"),r.a.createElement(Z,{onClick:a},"Let me rematch!"))}var ge=function(e,t){var n=Object(a.useRef)(!1);Object(a.useEffect)((function(){n.current?e():n.current=!0}),t)},Ee=function(e,t,n,a,r,c,o,i){var l=e.x,s=e.y,m=Object(u.a)(t),f=F(c);if(f[s][l]){var d=c.filter((function(e){return e.uuid!==f[s][l]})),h=c.filter((function(e){return e.uuid===f[s][l]}))[0];h=ne(h,l,s),ae(h)&&(h.isSunken=!0,r(a.concat(ue(h,t,a)))),o(d.concat([h]))}else i(),n(m.concat([[l,s]]))};var ye=function(){var e,t=Object(a.useState)("SETUP"),n=Object(l.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(!0),s=Object(l.a)(u,2),m=s[0],f=s[1],h=Object(a.useState)(D.advanced),p=Object(l.a)(h,2),v=p[0],b=p[1],g=Object(a.useState)(X(v.shipConfig)),E=Object(l.a)(g,2),y=E[0],S=E[1],w=Object(a.useState)([]),O=Object(l.a)(w,2),j=O[0],k=O[1],x=Object(a.useState)([]),C=Object(l.a)(x,2),N=C[0],M=C[1],A=Object(a.useState)(X(v.shipConfig)),_=Object(l.a)(A,2),L=_[0],I=_[1],T=Object(a.useState)([]),B=Object(l.a)(T,2),Y=B[0],G=B[1],z=Object(a.useState)([]),U=Object(l.a)(z,2),W=U[0],F=U[1],R=Object(a.useCallback)((function(){S(X(v.shipConfig)),I(X(v.shipConfig)),k([]),M([]),G([]),F([]),o("SETUP")}),[v,S,I,k,M,G,F,o]);return Object(a.useEffect)((function(){var e=null;return"PLAYING"!==c||m||(e=setTimeout((function(){var e=y.filter((function(e){var t;return(null===(t=e.hits)||void 0===t?void 0:t.length)>0&&!e.isSunken}));if(e[0]){var t=function(e,t,n,a){var r,c=t.hits,o=n.concat(a),u=[],s=function(e,t,n){return"advanced"===e||1===t.length?[[0,-1],[1,0],[0,1],[-1,0]]:"horizontal"===(t[0][0]===t[1][0]?"vertical":"horizontal")?[[1,0],[-1,0]]:[[0,1],[0,-1]]}(e,c),m=Object(i.a)(c);try{for(m.s();!(r=m.n()).done;){var f,h=Object(l.a)(r.value,2),p=h[0],v=h[1],b=Object(i.a)(s);try{for(b.s();!(f=b.n()).done;){var g=Object(l.a)(f.value,2),E=g[0],y=v+g[1],S=p+E;y>-1&&y<10&&S>-1&&S<10&&!le(S,y,o)&&!le(S,y,c)&&u.push([S,y])}}catch(w){b.e(w)}finally{b.f()}}}catch(w){m.e(w)}finally{m.f()}return u[d(0,u.length-1)]}(v.name,e[0],Y,W),n=Object(l.a)(t,2),a=n[0],r=n[1];Ee({x:a,y:r},Y,G,W,F,y,S,(function(){return f(!0)}))}else{var c=function(e,t,n){for(var a=e.map((function(e){return e.hits})).filter((function(e){return void 0!==e})).flat(),r=[],c=0;c<10;c++)for(var o=0;o<10;o++)r.push([o,c]);var i=r.filter((function(e){var t=Object(l.a)(e,2);return!le(t[0],t[1],a)})).filter((function(e){var n=Object(l.a)(e,2);return!le(n[0],n[1],t)})).filter((function(e){var t=Object(l.a)(e,2);return!le(t[0],t[1],n)}));return i[d(0,i.length-1)]}(y,Y,W),o=Object(l.a)(c,2),u=o[0],s=o[1];Ee({x:u,y:s},Y,G,W,F,y,S,(function(){return f(!0)}))}}),400)),function(){return clearTimeout(e)}}),[c,v.name,m,Y,G,W,F,y,S,f]),Object(a.useEffect)((function(){(L.every((function(e){return e.isSunken}))&&L.length>0||y.every((function(e){return e.isSunken}))&&y.length>0)&&o("FINISHED")}),[y,L,o]),ge((function(){S(X(v.shipConfig)),I(X(v.shipConfig)),k([]),M([]),G([]),F([]),o("SETUP")}),[v.name,S,I,k,M,G,F,o]),r.a.createElement(P.Provider,{value:[v,b]},r.a.createElement("div",{className:"App"},r.a.createElement(ve,{gameState:c}),"FINISHED"===c&&r.a.createElement(be,{computerShips:L,isPlayerTurn:m,restartGame:R}),r.a.createElement("div",{className:"App__row"},"SETUP"===c&&r.a.createElement($,{title:"Your\u200d board",usePlacedShips:[y,S]}),"SETUP"!==c&&r.a.createElement(he,{title:"Your\u200d board",isDisabled:"PLAYING"!==c,usePlacedShips:[y,S],useTakenShots:[Y,G],useTakenAutoShots:[W,W]}),r.a.createElement(de,{title:"Computer's board",gameCanStart:(e=y,K(e).every((function(e){return 0===e}))),onMissedShot:function(){return f(!1)},gameState:c,onStartClick:function(){return o("PLAYING")},showShips:"FINISHED"===c,isDisabled:"PLAYING"!==c||!m,useEnemyShips:[L,I],usePlacedShots:[j,k],useAutoShots:[N,M]}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.d53efb6e.chunk.js.map